# This is a project with Terraform and EKS

## Project Overview

This is a Terraform project that deploys a Space Invaders game application on Amazon EKS (Elastic Kubernetes Service).

### Project Structure

**EKS Infrastructure** (eks/):
- Creates an EKS cluster named "space-invaders" with managed node groups
- Sets up VPC with public/private subnets across 3 availability zones
- Configures security groups for SSH access to worker nodes
- Uses Terraform modules for EKS and VPC provisioning

**Kubernetes Application** (modules/website-config/):
- Deploys the Space Invaders container (`drehnstrom/space-invaders:v1.0`) 
- Creates a dedicated namespace for the application
- Sets up a Kubernetes deployment with 3 replicas
- Exposes the application via an AWS Load Balancer service

### Key Features

- **Container**: Runs a Space Invaders game accessible via web browser
- **High Availability**: 3 replicas across multiple node groups
- **Load Balancing**: AWS ELB automatically distributes traffic
- **Resource Management**: CPU/memory limits and requests configured
- **Infrastructure as Code**: Everything defined in Terraform

The cheat_sheet.txt provides kubectl commands to interact with the deployed application once the cluster is created.

## AWS Resources Created

| Resource Type | Resource Name | Purpose |
|---------------|---------------|---------|
| **VPC** | `{project}-vpc` | Main virtual private cloud for the infrastructure |
| **Internet Gateway** | `{project}-igw` | Provides internet access to public subnets |
| **NAT Gateway** | `{project}-nat-gw` | Enables internet access for private subnets |
| **Public Subnets** | `{project}-public-subnet-1,2,3` | Public subnets across 3 availability zones |
| **Private Subnets** | `{project}-private-subnet-1,2,3` | Private subnets for EKS worker nodes |
| **Route Tables** | `{project}-public-rt`, `{project}-private-rt` | Routing configuration for public and private subnets |
| **EKS Cluster** | `{project}-{random}` | Managed Kubernetes cluster |
| **EKS Node Groups** | `{project}-ng-1`, `{project}-ng-2` | Managed worker node groups (t3.small, t3.medium) |
| **Security Groups** | `{project}-ng-1-sg`, `{project}-ng-2-sg` | SSH access security groups for worker nodes |
| **Load Balancer** | `{project}-lb` | AWS Classic Load Balancer for application access |
| **EC2 Instances** | Auto-generated | Worker nodes managed by EKS node groups |
| **IAM Roles** | Auto-generated by EKS module | Service roles for EKS cluster and node groups |

*Note: `{project}` is replaced with the value from the project variable, and `{random}` is a random suffix for unique naming.*

## File Descriptions

### EKS Infrastructure Files (eks/)

- **`main.tf`** - Main Terraform configuration that sets up the EKS cluster with managed node groups
- **`cluster.tf`** - Defines the EKS cluster configuration and IAM roles
- **`vpc.tf`** - Creates VPC with public/private subnets across availability zones
- **`security-groups.tf`** - Configures security groups for SSH access to worker nodes
- **`providers.tf`** - Defines Terraform providers (AWS, Kubernetes, Helm)
- **`variables.tf`** - Input variables for the Terraform configuration
- **`terraform.tfvars`** - Variable values and configuration settings
- **`output.tf`** - Output values from the Terraform deployment
- **`cheat_sheet.txt`** - kubectl commands reference for interacting with the deployed cluster

### Kubernetes Application Module (modules/website-config/)

- **`kubernetes-deployment.tf`** - Defines the Space Invaders application deployment with 3 replicas
- **`kubernetes-load-balancer.tf`** - Creates AWS Load Balancer service to expose the application
- **`kubernetes-namespace.tf`** - Creates a dedicated namespace for the application
- **`variables.tf`** - Input variables for the module
- **`output.tf`** - Output values from the module (like load balancer URL)

## Getting Started

For detailed deployment instructions, please refer to [DEPLOYMENT.md](DEPLOYMENT.md) which contains step-by-step guidance for deploying this application on a Linux EC2 instance.
